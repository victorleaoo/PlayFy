{"ast":null,"code":"// Check for a Token (if not)\nexport function getTokenFromURL() {\n  const hash = window.location.hash;\n  let token = window.localStorage.getItem(\"token\");\n  let tokenExpiration = window.localStorage.getItem(\"tokenExpiration\");\n  if (!token && hash) {\n    token = hash.substring(1).split(\"&\").find(elem => elem.startsWith(\"access_token\")).split(\"=\")[1];\n\n    // Obtenha o tempo de expiração em segundos (suponhamos que o serviço forneça esse valor)\n    const expiresIn = hash.substring(1).split(\"&\").find(elem => elem.startsWith(\"expires_in\")).split(\"=\")[1];\n\n    // Calcule a data de expiração em milissegundos a partir do tempo de expiração\n    const expirationTime = Date.now() + parseInt(expiresIn) * 1000;\n    window.location.hash = \"\";\n    window.localStorage.setItem(\"token\", token);\n    window.localStorage.setItem(\"tokenExpiration\", expirationTime);\n  }\n\n  // Verifique se o token está expirado e remova-o do localStorage, se necessário\n  if (token && tokenExpiration) {\n    const currentTime = Date.now();\n    if (currentTime >= parseInt(tokenExpiration)) {\n      window.localStorage.removeItem(\"token\");\n      window.localStorage.removeItem(\"tokenExpiration\");\n      token = \"\"; // Token expirado, defina como null ou trate de acordo com sua lógica\n    }\n  }\n\n  return token;\n}","map":{"version":3,"names":["getTokenFromURL","hash","window","location","token","localStorage","getItem","tokenExpiration","substring","split","find","elem","startsWith","expiresIn","expirationTime","Date","now","parseInt","setItem","currentTime","removeItem"],"sources":["/home/victorleao/projetos/spotify/Spotify-Playlists-WebApp/frontend/src/utils/fetchDataUtils.js"],"sourcesContent":["// Check for a Token (if not)\nexport function getTokenFromURL() {\n    const hash = window.location.hash;\n    let token = window.localStorage.getItem(\"token\");\n    let tokenExpiration = window.localStorage.getItem(\"tokenExpiration\");\n\n    if (!token && hash) {\n        token = hash.substring(1).split(\"&\").find(elem => elem.startsWith(\"access_token\")).split(\"=\")[1];\n\n        // Obtenha o tempo de expiração em segundos (suponhamos que o serviço forneça esse valor)\n        const expiresIn = hash.substring(1).split(\"&\").find(elem => elem.startsWith(\"expires_in\")).split(\"=\")[1];\n\n        // Calcule a data de expiração em milissegundos a partir do tempo de expiração\n        const expirationTime = Date.now() + (parseInt(expiresIn) * 1000);\n\n        window.location.hash = \"\";\n        window.localStorage.setItem(\"token\", token);\n        window.localStorage.setItem(\"tokenExpiration\", expirationTime);\n    }\n\n    // Verifique se o token está expirado e remova-o do localStorage, se necessário\n    if (token && tokenExpiration) {\n        const currentTime = Date.now();\n        if (currentTime >= parseInt(tokenExpiration)) {\n            window.localStorage.removeItem(\"token\");\n            window.localStorage.removeItem(\"tokenExpiration\");\n            token = \"\"; // Token expirado, defina como null ou trate de acordo com sua lógica\n        }\n    }\n\n    return token;\n}"],"mappings":"AAAA;AACA,OAAO,SAASA,eAAeA,CAAA,EAAG;EAC9B,MAAMC,IAAI,GAAGC,MAAM,CAACC,QAAQ,CAACF,IAAI;EACjC,IAAIG,KAAK,GAAGF,MAAM,CAACG,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAChD,IAAIC,eAAe,GAAGL,MAAM,CAACG,YAAY,CAACC,OAAO,CAAC,iBAAiB,CAAC;EAEpE,IAAI,CAACF,KAAK,IAAIH,IAAI,EAAE;IAChBG,KAAK,GAAGH,IAAI,CAACO,SAAS,CAAC,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACC,UAAU,CAAC,cAAc,CAAC,CAAC,CAACH,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;;IAEhG;IACA,MAAMI,SAAS,GAAGZ,IAAI,CAACO,SAAS,CAAC,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACC,UAAU,CAAC,YAAY,CAAC,CAAC,CAACH,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;;IAExG;IACA,MAAMK,cAAc,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,GAAIC,QAAQ,CAACJ,SAAS,CAAC,GAAG,IAAK;IAEhEX,MAAM,CAACC,QAAQ,CAACF,IAAI,GAAG,EAAE;IACzBC,MAAM,CAACG,YAAY,CAACa,OAAO,CAAC,OAAO,EAAEd,KAAK,CAAC;IAC3CF,MAAM,CAACG,YAAY,CAACa,OAAO,CAAC,iBAAiB,EAAEJ,cAAc,CAAC;EAClE;;EAEA;EACA,IAAIV,KAAK,IAAIG,eAAe,EAAE;IAC1B,MAAMY,WAAW,GAAGJ,IAAI,CAACC,GAAG,CAAC,CAAC;IAC9B,IAAIG,WAAW,IAAIF,QAAQ,CAACV,eAAe,CAAC,EAAE;MAC1CL,MAAM,CAACG,YAAY,CAACe,UAAU,CAAC,OAAO,CAAC;MACvClB,MAAM,CAACG,YAAY,CAACe,UAAU,CAAC,iBAAiB,CAAC;MACjDhB,KAAK,GAAG,EAAE,CAAC,CAAC;IAChB;EACJ;;EAEA,OAAOA,KAAK;AAChB"},"metadata":{},"sourceType":"module","externalDependencies":[]}